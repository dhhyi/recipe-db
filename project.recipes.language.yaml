extends: dcc://go
devcontainer:
  build:
    user:
      - RUN go install -v golang.org/x/tools/gopls@latest
      - RUN go install -v github.com/go-delve/delve/cmd/dlv@latest
      - RUN go install -v honnef.co/go/tools/cmd/staticcheck@latest
      - RUN go install -v github.com/ramya-rao-a/go-outline@latest
      - ENV PATH=${HOME}/go/bin:${PATH}
      - RUN go install -v github.com/mitranim/gow@latest
  initialize: go mod download -x
  ports:
    - 5000
  environment:
    TESTING: "true"
vscode:
  settings:
    peacock.remoteColor: "#730e31"
  extensions:
    - johnpapa.vscode-peacock
extras:
  - traefik
traefik:
  network: intranet
  labels:
    http:
      routers:
        recipes:
          rule: PathPrefix(`/recipes`)
          entrypoints: rest-internal
