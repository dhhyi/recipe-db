extends: dcc://javascript
devcontainer:
  build:
    user:
      - RUN npm install -g prettier pnpm
  initialize: pnpm install
  ports:
    - 4000
  environment:
    REST_ENDPOINT: http://traefik:3000
vscode:
  settings:
    editor.defaultFormatter: esbenp.prettier-vscode
  extensions:
    - GraphQL.vscode-graphql
    - esbenp.prettier-vscode
extras:
  - traefik
traefik:
  network: intranet
  labels:
    http:
      routers:
        apollo:
          rule: PathPrefix(`/graphql`)
          entrypoints: web
          middlewares: apollo-stripprefix
      middlewares:
        apollo-stripprefix:
          stripprefix.prefixes: /graphql
