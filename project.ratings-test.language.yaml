extends: base://java
language:
  name: karate
  binary: karate
  version: false
devcontainer:
  build:
    args:
      KARATE_VERSION: 1.4.0
    root:
      - ADD https://github.com/karatelabs/karate/releases/download/v${KARATE_VERSION}/karate-${KARATE_VERSION}.jar /opt/karate.jar
      - RUN chmod +rx /opt/karate.jar
    files:
      - type: script
        path: /usr/local/bin/karate
        content: |
          #!/bin/bash
          java -jar /opt/karate.jar "$@"
      - type: script
        path: /test.sh
        content: |
          #!/bin/bash
          set -e
          karate -T 1 .
  environment:
    REST_API: http://traefik:3000
vscode:
  settings:
    karateRunner.karateJS.commandLineArgs: karate
    karateRunner.karateJar.commandLineArgs: karate
    peacock.remoteColor: "#269914"
  extensions:
    - johnpapa.vscode-peacock
    - karatelabs.karate
    - kirkslota.karate-runner
extras:
  - traefik
traefik:
  network: intranet
